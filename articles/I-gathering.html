<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="timaR">
<title>1 Gathering everything you need • timaR</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.11/clipboard.min.js" integrity="sha512-7O5pXpc0oCRrxk8RUfDYFgn0nO1t+jLuIOQdOMRp4APB7uZ4vSjspzp5y6YDtDs4VzUSTbWzBFZ/LKJhnyFOKw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="1 Gathering everything you need">
<meta property="og:description" content="timaR">
<meta property="og:image" content="https://github.com/taxonomicallyinformedannotation/tima-r/blob/main/man/figures/logo.svg">
<meta property="og:image:alt" content="Taxonomically Informed Metabolite Annotation">
<meta name="twitter:card" content="summary">
<meta name="twitter:creator" content="@adafede">
<meta name="twitter:site" content="@adafede">
<meta name="google-site-verification" content="Bt77rpBuC_R-0p62TWtA_ba5rvx-PuSEMv4LHg1UsOo">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light" data-bs-theme="light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">timaR</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">2.9.6</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../articles/timaR.html">Get started</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/I-gathering.html">1 Gathering everything you need</a>
    <a class="dropdown-item" href="../articles/II-preparing.html">2 Preparing inputs</a>
    <a class="dropdown-item" href="../articles/III-processing.html">3 Performing Taxonomically Informed Metabolite Annotation</a>
    <a class="dropdown-item" href="../articles/IV-benchmarking.html">4 Benchmarking Performance</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/taxonomicallyinformedannotation/tima-r/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">



<link href="I-gathering_files/htmltools-fill-0.5.8.1/fill.css" rel="stylesheet">
<script src="I-gathering_files/htmlwidgets-1.6.4/htmlwidgets.js"></script><link href="I-gathering_files/vis-9.1.0/vis-network.min.css" rel="stylesheet">
<script src="I-gathering_files/vis-9.1.0/vis-network.min.js"></script><script src="I-gathering_files/visNetwork-binding-2.1.2/visNetwork.js"></script><div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.svg" class="logo" alt=""><h1>1 Gathering everything you need</h1>
                        <h4 data-toc-skip class="author">Adriano
Rutz</h4>
            
            <h4 data-toc-skip class="date">2024-06-28</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/taxonomicallyinformedannotation/tima-r/blob/HEAD/vignettes/I-gathering.Rmd" class="external-link"><code>vignettes/I-gathering.Rmd</code></a></small>
      <div class="d-none name"><code>I-gathering.Rmd</code></div>
    </div>

    
    
<p>This vignette describes…</p>
<ul>
<li>All parameters you need</li>
<li>All inputs you need</li>
</ul>
<div class="section level2">
<h2 id="parameters">Parameters<a class="anchor" aria-label="anchor" href="#parameters"></a>
</h2>
<p>All steps require parameters. Some default parameters are available
and can be accessed in the <code>inst/params/default</code> directory.
If you prefer accessing them through the GUI, you can do so. Each
parameter contains a small help menu, you can click on, as illustrated
below.</p>
<p><img src="figures/screenshot-1.svg"></p>
<p><img src="figures/screenshot-2.svg"></p>
<p>For example, if you want to have an output compatible with Cytoscape,
with multiple annotations per features:</p>
<p><img src="figures/screenshot-3.svg"></p>
<p>All parameters will be saved and reported at the end of your
analysis.</p>
</div>
<div class="section level2">
<h2 id="inputs">Inputs<a class="anchor" aria-label="anchor" href="#inputs"></a>
</h2>
<div class="section level3">
<h3 id="your-own-files">Your own files<a class="anchor" aria-label="anchor" href="#your-own-files"></a>
</h3>
<p>You should provide your own files in the main menu. For this
tutorial, we will use some example files as below:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/source.html" class="external-link">source</a></span><span class="op">(</span>file <span class="op">=</span> <span class="st">"inst/scripts/get_example_features.R"</span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/source.html" class="external-link">source</a></span><span class="op">(</span>file <span class="op">=</span> <span class="st">"inst/scripts/get_example_metadata.R"</span><span class="op">)</span></span>
<span><span class="co"># source(file = "inst/scripts/get_example_sirius.R")</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/source.html" class="external-link">source</a></span><span class="op">(</span>file <span class="op">=</span> <span class="st">"inst/scripts/get_example_spectra.R"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="libraries">Libraries<a class="anchor" aria-label="anchor" href="#libraries"></a>
</h3>
<p>The following paragraph describes the libraries available by
default.</p>
<div class="section level4">
<h4 id="spectra">Spectra<a class="anchor" aria-label="anchor" href="#spectra"></a>
</h4>
<p>As a first step, you need spectral libraries to perform
MS<sup>2</sup>-based annotation.</p>
<div class="section level5">
<h5 id="experimental">Experimental<a class="anchor" aria-label="anchor" href="#experimental"></a>
</h5>
<p>You can of course use your own experimental spectral library to
perform MS<sup>2</sup> annotation. We currently support spectral
libraries in MSP or MGF format.</p>
<p>To get a small example:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/get_file.html">get_file</a></span><span class="op">(</span></span>
<span>  url <span class="op">=</span> <span class="va">paths</span><span class="op">$</span><span class="va">urls</span><span class="op">$</span><span class="va">examples</span><span class="op">$</span><span class="va">spectral_lib_mini</span><span class="op">$</span><span class="va">with_rt</span>,</span>
<span>  export <span class="op">=</span> <span class="va">paths</span><span class="op">$</span><span class="va">data</span><span class="op">$</span><span class="va">source</span><span class="op">$</span><span class="va">libraries</span><span class="op">$</span><span class="va">spectra</span><span class="op">$</span><span class="va">exp</span><span class="op">$</span><span class="va">with_rt</span></span>
<span><span class="op">)</span></span></code></pre></div>
<div class="section level6">
<h6 id="massbank">MassBank<a class="anchor" aria-label="anchor" href="#massbank"></a>
</h6>
<p>MassBank is downloaded and used by default.</p>
<p>We are currently working to get all MONA and GNPS experimental
spectra easily available.</p>
<p>However, programmatic download of MONA is currently not supported,
and GNPS spectra require some pre-processing.</p>
<p>So for now, either use your GNPS job ID and download MONA manually,
helpers to use them later on are already available. (see
<code>inst/scripts/prepare_libraries_spectra_exp_mona.R</code>).</p>
<p>In case you want to format your own spectral library to use it for
spectral matching, adapt the steps in
<code>inst/params/user/prepare_libraries_spectra.yaml</code> and
<code>inst/params/user/annotate_spectra.yaml</code>.</p>
</div>
</div>
<div class="section level5">
<h5 id="in-silico">
<em>In silico</em><a class="anchor" aria-label="anchor" href="#in-silico"></a>
</h5>
<p>As the availability of experimental spectra is limited, we can take
advantage of <em>in silico</em> generated spectra.</p>
</div>
</div>
<div class="section level4">
<h4 id="lotus">LOTUS<a class="anchor" aria-label="anchor" href="#lotus"></a>
</h4>
<p>We generated an <em>in silico</em> spectral library of the structures
found in LOTUS using <a href="https://doi.org/10.1021/acs.analchem.1c01465" class="external-link">CFM4</a>. For more
info, see <a href="https://doi.org/10.5281/zenodo.5607185" class="external-link uri">https://doi.org/10.5281/zenodo.5607185</a>. It is made
available in both polarities.</p>
<p>You can also complement with the in silico spectra from HMDB (not
running by default as quite long):</p>
</div>
<div class="section level4">
<h4 id="hmdb">HMDB<a class="anchor" aria-label="anchor" href="#hmdb"></a>
</h4>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/source.html" class="external-link">source</a></span><span class="op">(</span>file <span class="op">=</span> <span class="st">"inst/scripts/get_isdb_hmdb.R"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="retention-times">Retention times<a class="anchor" aria-label="anchor" href="#retention-times"></a>
</h4>
<p>This library is <strong>optional</strong>. As no standard LC method
is shared (for now) among laboratories, this library will be heavily
laboratory-dependent. It could also be a library of in silico predicted
retention times. If you want to prepare you own library, have a look at
<code>inst/params/user/prepare_libraries_rt.yaml</code>, and then:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/source.html" class="external-link">source</a></span><span class="op">(</span>file <span class="op">=</span> <span class="st">"inst/scripts/prepare_libraries_rt.R"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="structure-organism-pairs">Structure-Organism Pairs<a class="anchor" aria-label="anchor" href="#structure-organism-pairs"></a>
</h4>
<div class="section level5">
<h5 id="lotus-1">LOTUS<a class="anchor" aria-label="anchor" href="#lotus-1"></a>
</h5>
<p>As we developed <a href="https://lotusnprod.github.io/lotus-manuscript" class="external-link">LOTUS</a><a class="footnote-ref" tabindex="0" data-bs-toggle="popover" data-bs-content='&lt;p&gt;For more informations, see &lt;a href="https://doi.org/10.7554/eLife.70780" class="external-link uri"&gt;https://doi.org/10.7554/eLife.70780&lt;/a&gt;&lt;/p&gt;'><sup>1</sup></a> with
<strong>T</strong>axonomically <strong>I</strong>nformed
<strong>M</strong>etabolite <strong>A</strong>nnotation in mind, we
provide it here as a starting point for your structure-organism pairs
library.</p>
<p>The process to download LOTUS looks like this:</p>
<div class="visNetwork html-widget html-fill-item" id="htmlwidget-ac96cb3ee4656e2e9ec3" style="width:100%;height:432.632880098888px;"></div>
<script type="application/json" data-for="htmlwidget-ac96cb3ee4656e2e9ec3">{"x":{"nodes":{"name":["lib_sop_lot","lib_sop_lot_pre","par_def_pre_lib_sop_lot","par_fin_par","par_fin_par2","par_pre_lib_sop_lot","par_pre_par","par_pre_par2","par_usr_pre_lib_sop_lot","paths","paths_data_source_libraries_sop_lotus","paths_test_mode","paths_urls_lotus_doi","paths_urls_lotus_pattern","yaml_paths"],"type":["stem","stem","stem","stem","stem","stem","stem","stem","stem","stem","stem","stem","stem","stem","stem"],"description":[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],"status":["outdated","outdated","uptodate","uptodate","uptodate","uptodate","uptodate","uptodate","uptodate","uptodate","uptodate","uptodate","uptodate","uptodate","uptodate"],"seconds":[2.434,12.939,0,0.002,0.003,0.001,0,0,0.521,0.001,0,0,0,0,0.02],"bytes":[92979778,46526322,494,283,2506,185,1298,18282,174,2460,90,56,75,75,10252],"branches":[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],"label":["lib_sop_lot","lib_sop_lot_pre","par_def_pre_lib_sop_lot","par_fin_par","par_fin_par2","par_pre_lib_sop_lot","par_pre_par","par_pre_par2","par_usr_pre_lib_sop_lot","paths","paths_data_source_libraries_sop_lotus","paths_test_mode","paths_urls_lotus_doi","paths_urls_lotus_pattern","yaml_paths"],"color":["#78B7C5","#78B7C5","#354823","#354823","#354823","#354823","#354823","#354823","#354823","#354823","#354823","#354823","#354823","#354823","#354823"],"id":["lib_sop_lot","lib_sop_lot_pre","par_def_pre_lib_sop_lot","par_fin_par","par_fin_par2","par_pre_lib_sop_lot","par_pre_par","par_pre_par2","par_usr_pre_lib_sop_lot","paths","paths_data_source_libraries_sop_lotus","paths_test_mode","paths_urls_lotus_doi","paths_urls_lotus_pattern","yaml_paths"],"level":[4,7,3,4,4,6,3,3,5,2,3,3,3,3,1],"shape":["dot","dot","dot","dot","dot","dot","dot","dot","dot","dot","dot","dot","dot","dot","dot"]},"edges":{"from":["paths","par_pre_par2","paths","paths","paths","paths_data_source_libraries_sop_lotus","paths_urls_lotus_doi","paths_urls_lotus_pattern","par_fin_par","par_fin_par2","par_pre_par","paths","paths","par_def_pre_lib_sop_lot","par_usr_pre_lib_sop_lot","lib_sop_lot","par_pre_lib_sop_lot","paths_data_source_libraries_sop_lotus","paths_test_mode","yaml_paths","paths"],"to":["par_pre_par2","par_fin_par2","paths_test_mode","par_def_pre_lib_sop_lot","paths_urls_lotus_doi","lib_sop_lot","lib_sop_lot","lib_sop_lot","par_usr_pre_lib_sop_lot","par_usr_pre_lib_sop_lot","par_fin_par","paths_urls_lotus_pattern","paths_data_source_libraries_sop_lotus","par_pre_lib_sop_lot","par_pre_lib_sop_lot","lib_sop_lot_pre","lib_sop_lot_pre","lib_sop_lot_pre","lib_sop_lot_pre","paths","par_pre_par"],"arrows":["to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to"]},"nodesToDataframe":true,"edgesToDataframe":true,"options":{"width":"100%","height":"100%","nodes":{"shape":"dot","physics":false},"manipulation":{"enabled":false},"edges":{"smooth":{"type":"cubicBezier","forceDirection":"horizontal"}},"physics":{"stabilization":false},"interaction":{"zoomSpeed":1},"layout":{"hierarchical":{"enabled":true,"direction":"LR"}}},"groups":null,"width":null,"height":null,"idselection":{"enabled":false,"style":"width: 150px; height: 26px","useLabels":true,"main":"Select by id"},"byselection":{"enabled":false,"style":"width: 150px; height: 26px","multiple":false,"hideColor":"rgba(200,200,200,0.5)","highlight":false},"main":{"text":"","style":"font-family:Georgia, Times New Roman, Times, serif;font-weight:bold;font-size:20px;text-align:center;"},"submain":null,"footer":null,"background":"rgba(0, 0, 0, 0)","highlight":{"enabled":true,"hoverNearest":false,"degree":{"from":8,"to":1},"algorithm":"hierarchical","hideColor":"rgba(200,200,200,0.5)","labelOnly":true},"collapse":{"enabled":true,"fit":false,"resetHighlight":true,"clusterOptions":null,"keepCoord":true,"labelSuffix":"(cluster)"},"legend":{"width":0.2,"useGroups":false,"position":"right","ncol":1,"stepX":100,"stepY":100,"zoom":true,"nodes":{"label":["Outdated","Up to date","Stem"],"color":["#78B7C5","#354823","#899DA4"],"shape":["dot","dot","dot"]},"nodesToDataframe":true},"tooltipStay":300,"tooltipStyle":"position: fixed;visibility:hidden;padding: 5px;white-space: nowrap;font-family: verdana;font-size:14px;font-color:#000000;background-color: #f5f4ed;-moz-border-radius: 3px;-webkit-border-radius: 3px;border-radius: 3px;border: 1px solid #808074;box-shadow: 3px 3px 10px rgba(0, 0, 0, 0.2);"},"evals":[],"jsHooks":[]}</script><p>As you can see, one target seems outdated. In reality, we force it to
search if a new version of LOTUS exists each time. If a newer version
exists, it will fetch it and re-run needed steps accordingly.</p>
</div>
<div class="section level5">
<h5 id="ecmdb">ECMDB<a class="anchor" aria-label="anchor" href="#ecmdb"></a>
</h5>
<p>By default, we also complement LOTUS pairs with the ones coming from
<a href="https://ecmdb.ca/" class="external-link">ECMDB</a>.</p>
</div>
<div class="section level5">
<h5 id="hmdb-1">HMDB<a class="anchor" aria-label="anchor" href="#hmdb-1"></a>
</h5>
<p>And we do the same with the ones coming from <a href="https://hmdb.ca/" class="external-link">HMDB</a>.</p>
<p>For these first steps, you do not need to change any parameters as
they are implemented <em>by default</em>.</p>
</div>
<div class="section level5">
<h5 id="other-libraries">Other libraries<a class="anchor" aria-label="anchor" href="#other-libraries"></a>
</h5>
<p>As we want our tool to be flexible, you can also add your own library
to LOTUS. You just need to format it in order to be compatible. As
example, we prepared some ways too format closed, <em>in house</em>
libraries. If you need help formatting your library or would like to
share it with us for it to be implemented, feel free to contact us.</p>
<p>Before running the corresponding code, do not forget to modify
<code>inst/params/user/prepare_libraries_sop_closed.yaml</code></p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/source.html" class="external-link">source</a></span><span class="op">(</span>file <span class="op">=</span> <span class="st">"inst/scripts/prepare_libraries_sop_closed.R"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level5">
<h5 id="merging">Merging<a class="anchor" aria-label="anchor" href="#merging"></a>
</h5>
<p>Once all sub-libraries are ready, they are then merged in a single
file that will be used for the next steps.</p>
<div class="visNetwork html-widget html-fill-item" id="htmlwidget-e5c8c404fe174e4c81bd" style="width:100%;height:432.632880098888px;"></div>
<script type="application/json" data-for="htmlwidget-e5c8c404fe174e4c81bd">{"x":{"nodes":{"name":["lib_rt","lib_rt_sop","lib_sop_clo_pre","lib_sop_ecm","lib_sop_ecm_pre","lib_sop_hmd","lib_sop_hmd_pre","lib_sop_lot","lib_sop_lot_pre","lib_sop_mer","lib_spe_exp_int_pre","lib_spe_exp_int_pre_neg","lib_spe_exp_int_pre_pos","lib_spe_exp_int_pre_sop","lib_spe_exp_mb_pre","lib_spe_exp_mb_pre_sop","lib_spe_exp_mb_raw","lib_spe_is_lot_neg","lib_spe_is_lot_pos","lib_spe_is_lot_pre_neg","lib_spe_is_lot_pre_pos"],"type":["stem","stem","stem","stem","stem","stem","stem","stem","stem","stem","stem","stem","stem","stem","stem","stem","stem","stem","stem","stem","stem"],"description":[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],"status":["outdated","outdated","uptodate","uptodate","uptodate","uptodate","uptodate","outdated","outdated","outdated","uptodate","uptodate","uptodate","uptodate","uptodate","uptodate","uptodate","outdated","outdated","outdated","outdated"],"seconds":[365.098,0.001,1.01,1.487,1.526,9.798,38.952,2.546,12.939,37.808,4.229,0,0,0.001,155.761,0,8.491,0,0.005,0,0],"bytes":[6686,2954,268,1334921,177489,96479839,6989505,92979778,46526322,60306101,180721,49019,130197,1505,26771126,609246,118649350,168727179,221814796,168727179,221814796],"branches":[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],"label":["lib_rt","lib_rt_sop","lib_sop_clo_pre","lib_sop_ecm","lib_sop_ecm_pre","lib_sop_hmd","lib_sop_hmd_pre","lib_sop_lot","lib_sop_lot_pre","lib_sop_mer","lib_spe_exp_int_pre","lib_spe_exp_int_pre_neg","lib_spe_exp_int_pre_pos","lib_spe_exp_int_pre_sop","lib_spe_exp_mb_pre","lib_spe_exp_mb_pre_sop","lib_spe_exp_mb_raw","lib_spe_is_lot_neg","lib_spe_is_lot_pos","lib_spe_is_lot_pre_neg","lib_spe_is_lot_pre_pos"],"color":["#78B7C5","#78B7C5","#354823","#354823","#354823","#354823","#354823","#78B7C5","#78B7C5","#78B7C5","#354823","#354823","#354823","#354823","#354823","#354823","#354823","#78B7C5","#78B7C5","#78B7C5","#78B7C5"],"id":["lib_rt","lib_rt_sop","lib_sop_clo_pre","lib_sop_ecm","lib_sop_ecm_pre","lib_sop_hmd","lib_sop_hmd_pre","lib_sop_lot","lib_sop_lot_pre","lib_sop_mer","lib_spe_exp_int_pre","lib_spe_exp_int_pre_neg","lib_spe_exp_int_pre_pos","lib_spe_exp_int_pre_sop","lib_spe_exp_mb_pre","lib_spe_exp_mb_pre_sop","lib_spe_exp_mb_raw","lib_spe_is_lot_neg","lib_spe_is_lot_pos","lib_spe_is_lot_pre_neg","lib_spe_is_lot_pre_pos"],"level":[3,4,1,1,2,1,2,1,2,5,1,2,2,2,2,3,1,1,1,2,2],"shape":["dot","dot","dot","dot","dot","dot","dot","dot","dot","dot","dot","dot","dot","dot","dot","dot","dot","dot","dot","dot","dot"]},"edges":{"from":["lib_spe_exp_mb_raw","lib_spe_is_lot_neg","lib_rt","lib_spe_exp_int_pre_neg","lib_spe_exp_int_pre_pos","lib_spe_is_lot_pre_neg","lib_spe_is_lot_pre_pos","lib_spe_exp_int_pre","lib_spe_is_lot_pos","lib_sop_ecm","lib_sop_lot","lib_spe_exp_int_pre","lib_spe_exp_int_pre","lib_sop_hmd","lib_rt_sop","lib_sop_clo_pre","lib_sop_ecm_pre","lib_sop_hmd_pre","lib_sop_lot_pre","lib_spe_exp_int_pre_sop","lib_spe_exp_mb_pre_sop","lib_spe_exp_mb_pre"],"to":["lib_spe_exp_mb_pre","lib_spe_is_lot_pre_neg","lib_rt_sop","lib_rt","lib_rt","lib_rt","lib_rt","lib_spe_exp_int_pre_neg","lib_spe_is_lot_pre_pos","lib_sop_ecm_pre","lib_sop_lot_pre","lib_spe_exp_int_pre_sop","lib_spe_exp_int_pre_pos","lib_sop_hmd_pre","lib_sop_mer","lib_sop_mer","lib_sop_mer","lib_sop_mer","lib_sop_mer","lib_sop_mer","lib_sop_mer","lib_spe_exp_mb_pre_sop"],"arrows":["to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to"]},"nodesToDataframe":true,"edgesToDataframe":true,"options":{"width":"100%","height":"100%","nodes":{"shape":"dot","physics":false},"manipulation":{"enabled":false},"edges":{"smooth":{"type":"cubicBezier","forceDirection":"horizontal"}},"physics":{"stabilization":false},"interaction":{"zoomSpeed":1},"layout":{"hierarchical":{"enabled":true,"direction":"LR"}}},"groups":null,"width":null,"height":null,"idselection":{"enabled":false,"style":"width: 150px; height: 26px","useLabels":true,"main":"Select by id"},"byselection":{"enabled":false,"style":"width: 150px; height: 26px","multiple":false,"hideColor":"rgba(200,200,200,0.5)","highlight":false},"main":{"text":"","style":"font-family:Georgia, Times New Roman, Times, serif;font-weight:bold;font-size:20px;text-align:center;"},"submain":null,"footer":null,"background":"rgba(0, 0, 0, 0)","highlight":{"enabled":true,"hoverNearest":false,"degree":{"from":8,"to":1},"algorithm":"hierarchical","hideColor":"rgba(200,200,200,0.5)","labelOnly":true},"collapse":{"enabled":true,"fit":false,"resetHighlight":true,"clusterOptions":null,"keepCoord":true,"labelSuffix":"(cluster)"},"legend":{"width":0.2,"useGroups":false,"position":"right","ncol":1,"stepX":100,"stepY":100,"zoom":true,"nodes":{"label":["Outdated","Up to date","Stem"],"color":["#78B7C5","#354823","#899DA4"],"shape":["dot","dot","dot"]},"nodesToDataframe":true},"tooltipStay":300,"tooltipStyle":"position: fixed;visibility:hidden;padding: 5px;white-space: nowrap;font-family: verdana;font-size:14px;font-color:#000000;background-color: #f5f4ed;-moz-border-radius: 3px;-webkit-border-radius: 3px;border-radius: 3px;border: 1px solid #808074;box-shadow: 3px 3px 10px rgba(0, 0, 0, 0.2);"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<div class="section level4">
<h4 id="adducts">Adducts<a class="anchor" aria-label="anchor" href="#adducts"></a>
</h4>
<p>The next library you need is an adducts library! As a main limitation
of current annotation tools is adducts detection and coverage, an
adducts library can also be generated in order to perform MS<sup>1</sup>
annotation later on.</p>
<div class="visNetwork html-widget html-fill-item" id="htmlwidget-36aa3d2a04d42bbc2145" style="width:100%;height:432.632880098888px;"></div>
<script type="application/json" data-for="htmlwidget-36aa3d2a04d42bbc2145">{"x":{"nodes":{"name":["lib_rt","lib_rt_sop","lib_sop_clo_pre","lib_sop_ecm","lib_sop_ecm_pre","lib_sop_hmd","lib_sop_hmd_pre","lib_sop_lot","lib_sop_lot_pre","lib_sop_mer","lib_spe_exp_int_pre","lib_spe_exp_int_pre_neg","lib_spe_exp_int_pre_pos","lib_spe_exp_int_pre_sop","lib_spe_exp_mb_pre","lib_spe_exp_mb_pre_sop","lib_spe_exp_mb_raw","lib_spe_is_lot_neg","lib_spe_is_lot_pos","lib_spe_is_lot_pre_neg","lib_spe_is_lot_pre_pos","dic_add","dic_clu","lib_add","lib_mer_str_met"],"type":["stem","stem","stem","stem","stem","stem","stem","stem","stem","stem","stem","stem","stem","stem","stem","stem","stem","stem","stem","stem","stem","stem","stem","stem","stem"],"description":[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],"status":["outdated","outdated","uptodate","uptodate","uptodate","uptodate","uptodate","outdated","outdated","outdated","uptodate","uptodate","uptodate","uptodate","uptodate","uptodate","uptodate","outdated","outdated","outdated","outdated","outdated","outdated","outdated","outdated"],"seconds":[365.098,0.001,1.01,1.487,1.526,9.798,38.952,2.546,12.939,37.808,4.229,0,0,0.001,155.761,0,8.491,0,0.005,0,0,null,null,null,null],"bytes":[6686,2954,268,1334921,177489,96479839,6989505,92979778,46526322,60306101,180721,49019,130197,1505,26771126,609246,118649350,168727179,221814796,168727179,221814796,null,null,null,null],"branches":[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],"label":["lib_rt","lib_rt_sop","lib_sop_clo_pre","lib_sop_ecm","lib_sop_ecm_pre","lib_sop_hmd","lib_sop_hmd_pre","lib_sop_lot","lib_sop_lot_pre","lib_sop_mer","lib_spe_exp_int_pre","lib_spe_exp_int_pre_neg","lib_spe_exp_int_pre_pos","lib_spe_exp_int_pre_sop","lib_spe_exp_mb_pre","lib_spe_exp_mb_pre_sop","lib_spe_exp_mb_raw","lib_spe_is_lot_neg","lib_spe_is_lot_pos","lib_spe_is_lot_pre_neg","lib_spe_is_lot_pre_pos","dic_add","dic_clu","lib_add","lib_mer_str_met"],"color":["#78B7C5","#78B7C5","#354823","#354823","#354823","#354823","#354823","#78B7C5","#78B7C5","#78B7C5","#354823","#354823","#354823","#354823","#354823","#354823","#354823","#78B7C5","#78B7C5","#78B7C5","#78B7C5","#78B7C5","#78B7C5","#78B7C5","#78B7C5"],"id":["lib_rt","lib_rt_sop","lib_sop_clo_pre","lib_sop_ecm","lib_sop_ecm_pre","lib_sop_hmd","lib_sop_hmd_pre","lib_sop_lot","lib_sop_lot_pre","lib_sop_mer","lib_spe_exp_int_pre","lib_spe_exp_int_pre_neg","lib_spe_exp_int_pre_pos","lib_spe_exp_int_pre_sop","lib_spe_exp_mb_pre","lib_spe_exp_mb_pre_sop","lib_spe_exp_mb_raw","lib_spe_is_lot_neg","lib_spe_is_lot_pos","lib_spe_is_lot_pre_neg","lib_spe_is_lot_pre_pos","dic_add","dic_clu","lib_add","lib_mer_str_met"],"level":[3,4,1,1,2,1,2,1,2,5,1,2,2,2,2,3,1,1,1,2,2,1,1,7,6],"shape":["dot","dot","dot","dot","dot","dot","dot","dot","dot","dot","dot","dot","dot","dot","dot","dot","dot","dot","dot","dot","dot","dot","dot","dot","dot"]},"edges":{"from":["lib_spe_exp_mb_raw","lib_spe_is_lot_neg","lib_rt","lib_sop_mer","lib_spe_exp_int_pre_neg","lib_spe_exp_int_pre_pos","lib_spe_is_lot_pre_neg","lib_spe_is_lot_pre_pos","dic_add","dic_clu","lib_mer_str_met","lib_spe_exp_int_pre","lib_spe_is_lot_pos","lib_sop_ecm","lib_sop_lot","lib_spe_exp_int_pre","lib_spe_exp_int_pre","lib_sop_hmd","lib_rt_sop","lib_sop_clo_pre","lib_sop_ecm_pre","lib_sop_hmd_pre","lib_sop_lot_pre","lib_spe_exp_int_pre_sop","lib_spe_exp_mb_pre_sop","lib_spe_exp_mb_pre"],"to":["lib_spe_exp_mb_pre","lib_spe_is_lot_pre_neg","lib_rt_sop","lib_mer_str_met","lib_rt","lib_rt","lib_rt","lib_rt","lib_add","lib_add","lib_add","lib_spe_exp_int_pre_neg","lib_spe_is_lot_pre_pos","lib_sop_ecm_pre","lib_sop_lot_pre","lib_spe_exp_int_pre_sop","lib_spe_exp_int_pre_pos","lib_sop_hmd_pre","lib_sop_mer","lib_sop_mer","lib_sop_mer","lib_sop_mer","lib_sop_mer","lib_sop_mer","lib_sop_mer","lib_spe_exp_mb_pre_sop"],"arrows":["to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to"]},"nodesToDataframe":true,"edgesToDataframe":true,"options":{"width":"100%","height":"100%","nodes":{"shape":"dot","physics":false},"manipulation":{"enabled":false},"edges":{"smooth":{"type":"cubicBezier","forceDirection":"horizontal"}},"physics":{"stabilization":false},"interaction":{"zoomSpeed":1},"layout":{"hierarchical":{"enabled":true,"direction":"LR"}}},"groups":null,"width":null,"height":null,"idselection":{"enabled":false,"style":"width: 150px; height: 26px","useLabels":true,"main":"Select by id"},"byselection":{"enabled":false,"style":"width: 150px; height: 26px","multiple":false,"hideColor":"rgba(200,200,200,0.5)","highlight":false},"main":{"text":"","style":"font-family:Georgia, Times New Roman, Times, serif;font-weight:bold;font-size:20px;text-align:center;"},"submain":null,"footer":null,"background":"rgba(0, 0, 0, 0)","highlight":{"enabled":true,"hoverNearest":false,"degree":{"from":8,"to":1},"algorithm":"hierarchical","hideColor":"rgba(200,200,200,0.5)","labelOnly":true},"collapse":{"enabled":true,"fit":false,"resetHighlight":true,"clusterOptions":null,"keepCoord":true,"labelSuffix":"(cluster)"},"legend":{"width":0.2,"useGroups":false,"position":"right","ncol":1,"stepX":100,"stepY":100,"zoom":true,"nodes":{"label":["Outdated","Up to date","Stem"],"color":["#78B7C5","#354823","#899DA4"],"shape":["dot","dot","dot"]},"nodesToDataframe":true},"tooltipStay":300,"tooltipStyle":"position: fixed;visibility:hidden;padding: 5px;white-space: nowrap;font-family: verdana;font-size:14px;font-color:#000000;background-color: #f5f4ed;-moz-border-radius: 3px;-webkit-border-radius: 3px;border-radius: 3px;border: 1px solid #808074;box-shadow: 3px 3px 10px rgba(0, 0, 0, 0.2);"},"evals":[],"jsHooks":[]}</script><p>As you can see, it depends on the previously built library.</p>
<p>We now recommend you to read the <a href="https://taxonomicallyinformedannotation.github.io/tima-r/articles/II-preparing.html">next
vignette</a>.</p>
</div>
</div>
</div>

  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Adriano Rutz.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
